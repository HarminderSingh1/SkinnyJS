!function(a){if(a.modalDialog&&a.modalDialog._isHost)throw new Error("Attempt to load jquery.modalDialogContent.js in the same window as jquery.modalDialog.js.");var b=-1,c="dialog",d=function(){return b++,c+b},e=function(b){this.eventType=b,this.callbacks=new a.Callbacks;for(var c=1;c<arguments.length;c++)this.callbacks.add(arguments[c])};e.prototype={fire:function(b){var c=new a.Event(this.eventType);return a.extend(c,b),this.callbacks.fire(c),c},add:function(a){a&&this.callbacks.add(a)}};var f=function(a,b){var c="on"+b;a[c]=new e(b,a.settings[c]),delete a.settings[c]},g=function(a){if(this.settings=a,f(this,"open"),f(this,"close"),f(this,"beforeclose"),this.settings._window){this._window=a._window,delete a._window,this.settings._fullId=this._window.name;var b=this.settings._fullId.split("_");b.pop(),b.length>0&&(this.settings.parentId=b.join("_"),this._parentWindow=parent.frames[this.settings.parentId])}else this.settings._parentWindow&&(this.settings.parentId=a._parentWindow.name,this._parentWindow=a._parentWindow,delete a._parentWindow,this.settings._fullId=this.settings.parentId+"_"+d(),this._postMessage("create",this.settings))};g.prototype={dialogType:"iframe",open:function(){this._postMessage("open")},close:function(){this._postMessage("close")},getParent:function(){return"undefined"==typeof this._parentDialog&&(this._parentDialog=null,this.settings.parentId&&(this._parentDialog=new g({_window:parent.frames[this.settings.parentId]}))),this._parentDialog},getWindow:function(){return this._window||(this._window=this._window||parent.frames[this.settings._fullId]),this._window},setHeight:function(b,c,d){if(a.modalDialog.autoSizing&&!this._internalCall)throw new Error("Auto sizing is enabled, so manual size setting is disallowed.");b=Math.round(b),this._currentFrameHeight&&this._currentFrameHeight==b||(this._currentFrameHeight=b,this._postMessage("setHeight",{height:b,center:!!c,skipAnimation:!!d}))},setHeightFromContent:function(b,c){var d;if(a.modalDialog.sizeElement){var e=a.modalDialog.sizeElement.clientRect();d=e.top+e.height}else d=a(window).contentSize().height;this.setHeight(d,b,c)},_setHeightFromContentInternal:function(){this._internalCall=!0,this.setHeightFromContent.apply(this,arguments),this._internalCall=!1},center:function(){this._postMessage("center")},setTitle:function(a){this._postMessage("setTitle",{title:a})},setTitleFromContent:function(){this.setTitle(a("head title").text())},notifyReady:function(){a.modalDialog.sizeElement&&(a.modalDialog.sizeElement instanceof jQuery||(a.modalDialog.sizeElement=a(a.modalDialog.sizeElement)),0===a.modalDialog.sizeElement.length&&(a.modalDialog.sizeElement=null)),a.modalDialog.useTitleTag&&this.setTitleFromContent(),this._setHeightFromContentInternal(!1,!0),this._postMessage("notifyReady",{hostname:document.location.protocol+document.location.hostname}),a.modalDialog.autoSizing&&this.enableAutoSizing()},enableAutoSizing:function(b){"undefined"==typeof b&&(b=!0),b?this._autoSizeInterval=setInterval(a.proxy(function(){this._setHeightFromContentInternal(!1,!0)},this),100):this._autoSizeInterval&&window.clearInterval(this._autoSizeInterval)},_postMessage:function(b,c){var d={dialogCmd:b,_fullId:this.settings._fullId};c&&a.extend(d,c);var e=a.param(d);if("undefined"==typeof this._postMessageDirect)try{this._postMessageDirect=parent._dialogReceiveMessageManual,this._postMessageDirect||(this._postMessageDirect=null)}catch(f){this._postMessageDirect=null}if(this._postMessageDirect)this._postMessageDirect(e,document.location.protocol+"//"+document.location.host);else{if(!a.modalDialog.parentHostName)throw new Error("Must specify $.modalDialog.parentHostName because the parent is in a different domain");a.postMessage?a.postMessage(e,"*",parent):parent.postMessage(e,a.modalDialog.parentHostName)}},_trigger:function(a,b){var c=this["on"+a];c&&c.fire(b)}};var h={};a.modalDialog={},a.modalDialog._isContent=!0,a.modalDialog.manualNotifyReady=!1,a.modalDialog.sizeElement=".dialog-content-size",a.modalDialog.autoSizing=!0,a.modalDialog.parentHostName=null,a.modalDialog.useTitleTag=!0,a.modalDialog.create=function(b){b=a.extend({},b),b._parentWindow=window;var c=new g(b);return h[c.settings._fullId]=c,c},a.modalDialog.getCurrent=function(){if(0!==window.name.indexOf("dialog"))return null;var a=i(window.name);return a||(a=new g({_window:window}),h[window.name]=a),a};var i=function(a){return h[a]},j={setHeightFromContent:function(a,b){a.setHeightFromContent("true"===b.center,"true"===b.skipAnimation)},setTitleFromContent:function(a){a.setTitleFromContent()},eventclose:function(a,b){a._trigger("close",b)},eventbeforeclose:function(a,b){a._trigger("beforeclose",b)}},k=function(b){var c;try{c=a.deparam(b.originalEvent?b.originalEvent.data:b.data)}catch(d){}if(c.dialogCmd){var e=j[c.dialogCmd];if(e){var f=null;c._eventDialogId?(f=i(c._eventDialogId),delete c._eventDialogId):f=a.modalDialog.getCurrent(window),f&&e(f,c)}}};a.receiveMessage?a.receiveMessage(k,"*"):a(window).on("message",k),a.mobile&&a.mobile.resetActivePageHeight&&(a.mobile.document.off("pageshow",a.mobile.resetActivePageHeight),a.mobile.window.off("throttledresize",a.mobile.resetActivePageHeight),a(".ui-page").css("min-height",0),a.mobile.resetActivePageHeight=a.noop,a.mobile.focusPage=a.noop),a(window).load(function(){var b=a.modalDialog.getCurrent();b&&(a.modalDialog.manualNotifyReady||b.notifyReady())})}(jQuery);